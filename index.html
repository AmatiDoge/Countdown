<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>לוח דד-ליינים אקדמי</title>
  <style>
    :root {
      --bg-color: #f0f2f5;
      --card-bg: #ffffff;
      --primary: #3498db;
      --exam-color: #9b59b6;
      --honors-color: #2980b9;
      --red: #ff7675;
      --orange: #fab1a0;
      --green: #55efc4;
      --text: #2d3436;
    }

    body {
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
      background-color: var(--bg-color);
      color: var(--text);
      margin: 0;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    h1 { margin-bottom: 10px; color: #2c3e50; }
    .subtitle { margin-bottom: 30px; color: #636e72; font-size: 1.1rem; }

    .container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
      width: 100%;
      max-width: 1400px;
    }

    .table-container {
      background: var(--card-bg);
      border-radius: 12px;
      box-shadow: 0 10px 20px rgba(0,0,0,0.05);
      overflow: hidden;
      flex: 1;
      min-width: 320px;
      max-width: 450px;
      margin-bottom: 20px;
    }

    .table-header {
      color: white;
      padding: 15px;
      font-size: 1.2rem;
      font-weight: bold;
      text-align: center;
    }

    .header-courses { background: var(--primary); }
    .header-exams { background: var(--exam-color); }
    .header-honors { background: var(--honors-color); }

    table {
      border-collapse: collapse;
      width: 100%;
      table-layout: fixed;
    }

    th {
      background-color: #f8f9fa;
      padding: 12px;
      text-align: right;
      font-size: 0.85rem;
      color: #636e72;
      border-bottom: 2px solid #edf2f7;
    }

    td {
      padding: 12px 15px;
      border-bottom: 1px solid #edf2f7;
      word-wrap: break-word;
      font-size: 0.95rem;
    }

    .countdown {
      font-weight: 700;
      text-align: center;
      border-radius: 6px;
      padding: 4px 8px;
      display: block;
    }

    .status-red { color: #d63031; background: #fff5f5; }
    .status-orange { color: #e67e22; background: #fffaf0; }
    .status-green { color: #27ae60; background: #f0fff4; }
    .status-passed { color: #636e72; background: #f1f2f6; opacity: 0.6; }

    .ltr { direction: ltr; text-align: left; }
    .controls { margin-bottom: 20px; }

    button {
      padding: 10px 20px;
      background: #2c3e50;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
    }

    @media (max-width: 768px) {
      .container { flex-direction: column; align-items: center; }
      .table-container { width: 100%; max-width: none; }
    }
  </style>
</head>
<body>

<h1>הלו״ז האקדמי שלי</h1>
<div class="subtitle">מעקב דד-ליינים ובחינות - סמסטר א' 2026</div>

<div class="controls">
  <button onclick="togglePassed()">הצג/הסתר אירועים שעברו</button>
</div>

<div class="container">
  
  <div class="table-container">
    <div class="table-header header-exams">בחינות (מועד א' ו-ב')</div>
    <table id="examsTable">
      <thead>
        <tr><th>קורס</th><th>זמן נותר</th></tr>
      </thead>
      <tbody>
        <tr data-date="2026-01-27T15:45:00"><td>קוגניטיבית ב' – קשב ושפה (מועד א')</td><td class="countdown"></td></tr>
        <tr data-date="2026-02-02T15:45:00"><td>סטטיסטיקה רב-משתנית</td><td class="countdown"></td></tr>
        <tr data-date="2026-02-08T09:45:00"><td>הבסיס הביולוגי של ההתנהגות</td><td class="countdown"></td></tr>
        <tr data-date="2026-02-22T09:45:00"><td>תאוריות באישיות</td><td class="countdown"></td></tr>
        <tr data-date="2026-02-27T09:00:00"><td>שיטות מחקר והערכה</td><td class="countdown"></td></tr>
        <tr data-date="2026-03-04T09:45:00"><td>קוגניטיבית ב' – קשב ושפה (מועד ב')</td><td class="countdown"></td></tr>
      </tbody>
    </table>
  </div>

  <div class="table-container">
    <div class="table-header header-courses">מטלות ובחנים</div>
    <table>
      <thead>
        <tr><th>אירוע</th><th>זמן נותר</th></tr>
      </thead>
      <tbody>
        <tr data-date="2026-01-20T13:45:00"><td>בסיס ביולוגי - בוחן שלישי</td><td class="countdown"></td></tr>
        <tr data-date="2026-01-25T23:59:00"><td>שיטות מחקר – הצעת מחקר</td><td class="countdown"></td></tr>
        <tr data-date="2025-12-31T10:00:00"><td>שיטות מחקר – סטטוס קבוצה</td><td class="countdown"></td></tr>
      </tbody>
    </table>
  </div>

  <div class="table-container">
    <div class="table-header header-honors ltr">Honors Track</div>
    <table>
      <thead>
        <tr><th class="ltr">Event</th><th class="ltr">Time Left</th></tr>
      </thead>
      <tbody>
        <tr class="ltr" data-date="2026-01-06T09:00:00"><td>Presentation Shachar Ayal</td><td class="countdown"></td></tr>
        <tr class="ltr" data-date="2026-01-24T23:59:00"><td>4th Research Proposal</td><td class="countdown"></td></tr>
      </tbody>
    </table>
  </div>

</div>

<script>
  let hidePassed = false;

  function updateCountdowns() {
    const now = new Date();
    const rows = document.querySelectorAll('tbody tr');

    rows.forEach(row => {
      const dateStr = row.getAttribute('data-date');
      const target = new Date(dateStr);
      const diff = target - now;
      const countdownEl = row.querySelector('.countdown');
      const isLtr = row.classList.contains('ltr');

      if (diff <= 0) {
        countdownEl.textContent = isLtr ? "Passed" : "עבר";
        countdownEl.className = 'countdown status-passed';
        row.style.display = hidePassed ? 'none' : 'table-row';
        return;
      }

      const days = Math.floor(diff / (1000 * 60 * 60 * 24));
      const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);

      countdownEl.textContent = isLtr ? `${days}d, ${hours}h` : `${days} ימים, ${hours} ש׳`;

      if (days <= 3) countdownEl.className = 'countdown status-red';
      else if (days <= 10) countdownEl.className = 'countdown status-orange';
      else countdownEl.className = 'countdown status-green';
      
      row.style.display = 'table-row';
    });

    sortTables();
  }

  function sortTables() {
    const tables = document.querySelectorAll('table');
    tables.forEach(table => {
      const tbody = table.tBodies[0];
      const rows = Array.from(tbody.rows);
      rows.sort((a, b) => new Date(a.getAttribute('data-date')) - new Date(b.getAttribute('data-date')));
      rows.forEach(row => tbody.appendChild(row));
    });
  }

  function togglePassed() {
    hidePassed = !hidePassed;
    updateCountdowns();
  }

  updateCountdowns();
  setInterval(updateCountdowns, 60000);
</script>

</body>
</html>
